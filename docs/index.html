<!DOCTYPE html>
<html lang="es">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CatÃ¡logo Blanco & Madera</title>
    <!-- Chosen Palette: Warm Neutrals (Beige/Tan) - Enfocado en una herramienta de venta clara y funcional. -->
    <!-- Application Structure Plan: DiseÃ±o de dos paneles (CatÃ¡logo y Carrito). En mÃ³vil, se usa un sistema de pestaÃ±as (Tabs) con una barra de navegaciÃ³n inferior fija para alternar entre el CatÃ¡logo y la CotizaciÃ³n, resolviendo el problema de desplazamiento vertical y mejorando la UX mÃ³vil. Se aÃ±aden botones de acciÃ³n (Copiar, Imprimir) al pie del Carrito. -->
    <!-- Visualization & Content Choices: La interfaz se basa en listas dinÃ¡micas, priorizando la usabilidad y la claridad del precio final. No se utilizan Chart.js, Plotly, SVG ni Mermaid. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fefce8; /* Fondo suave (Amber 50) */
        }
        .item-card {
            transition: transform 0.1s ease-out;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        .item-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .amber-gradient {
            background-image: linear-gradient(to right, #d4a753, #b18b45);
        }

        /* ESTILOS ESPECÃFICOS PARA EL LOGO SVG (PARA EVITAR PROBLEMAS DE URL) */
        .logo-text-main {
            font-family: serif; /* Usar serif para simular el estilo del logo */
            font-size: 2.5rem; /* Ajuste para escritorio */
            font-weight: 800; 
            color: #1c1917; 
            line-height: 1.1;
        }
        .logo-text-deco {
            font-size: 0.8rem;
            letter-spacing: 0.4em;
            color: #78716c; /* stone-500 */
            text-align: center;
            display: block;
            margin-top: 0.2rem;
        }

        /* ESTILOS PARA IMPRESIÃ“N/PDF (OCULTA CONTROLES) */
        @media print {
            body { background-color: #ffffff !important; }
            header, .controls, .nav-tabs, .action-buttons, #whatsapp-number-group, .hidden-print, #desktop-footer {
                display: none !important;
            }
            .main-content-container {
                display: block !important;
                max-width: 800px;
                margin: 0 auto;
            }
            #quotation-print-area {
                display: block !important;
                padding: 20px;
            }
            #quotation-print-area .text-3xl { font-size: 1.5rem !important; }
            #quotation-print-area .text-5xl { font-size: 2.5rem !important; }
            /* Mostrar el layout simplificado del pedido */
            #print-header, #print-details {
                display: block !important;
            }
            #cart-container-desktop {
                box-shadow: none !important;
                border: 1px solid #ccc;
            }
            .cart-item-desktop {
                justify-content: space-between !important;
            }
            .cart-item-controls {
                display: none !important;
            }
            .cart-item-details {
                flex-grow: 1;
            }
            .cart-item-details .text-sm {
                display: block !important; /* Muestra el subtotal en impresiÃ³n */
            }
        }

        /* USABILIDAD MÃ“VIL (Tabs) */
        #cart-container-desktop, #catalog-container-desktop {
            /* Ocultar en mÃ³vil por defecto para usar las pestaÃ±as */
            display: none; 
        }
        .nav-tabs {
            position: fixed;
            bottom: 0;
            width: 100%;
            left: 0;
            z-index: 20;
            background-color: white;
            box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .tab-button {
            transition: all 0.2s;
        }
        .tab-button.active {
            color: #b45309; /* amber-800 */
            border-top: 3px solid #f59e0b; /* amber-500 */
        }
        @media (min-width: 768px) {
            /* Mostrar las dos columnas en escritorio */
            #cart-container-desktop, #catalog-container-desktop {
                display: block !important;
            }
            .nav-tabs {
                display: none !important;
            }
        }
    </style>
</head>
<body class="text-stone-800">
    <!-- Contenedor general para ocultar elementos al imprimir -->
    <div id="main-app-container">

        <header class="bg-white shadow-lg sticky top-0 z-10 hidden-print">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 text-center">
                
                <!-- Logo Centrado y Simplificado para el Encabezado -->
                <div class="flex flex-col items-center justify-center mb-2">
                    <span class="logo-text-main">blanco&madera</span>
                    <hr class="w-32 border-stone-400 my-0.5">
                    <span class="logo-text-deco">DECO HOME</span>
                </div>
                
                <h1 class="text-3xl font-extrabold text-amber-800 tracking-wide mt-2">CATÃLOGO DE PRODUCTOS</h1>
                <p class="text-stone-600 mt-1 mb-2">Generador de Cotizaciones para Clientes</p>
            </div>
        </header>

        <main class="container mx-auto p-4 sm:p-6 lg:p-8 main-content-container">
            
            <!-- Controles de Filtro -->
            <div class="bg-white p-6 rounded-xl shadow-lg mb-6 controls hidden-print">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <label for="category-filter" class="block text-sm font-semibold text-stone-700 mb-1">Filtrar por CategorÃ­a</label>
                        <select id="category-filter" class="w-full rounded-lg border-stone-300 shadow-md focus:border-amber-600 focus:ring-amber-600 p-2">
                            <option value="all">Todas las CategorÃ­as</option>
                        </select>
                    </div>
                    <div>
                        <label for="search-box" class="block text-sm font-semibold text-stone-700 mb-1">Buscar por Nombre</label>
                        <input type="text" id="search-box" placeholder="Escribe el nombre del producto..." class="w-full rounded-lg border-stone-300 shadow-md focus:border-amber-600 focus:ring-amber-600 p-2">
                    </div>
                    <div class="md:self-end">
                        <button id="reset-button" class="w-full md:w-auto bg-stone-500 text-white font-bold py-2.5 px-6 rounded-lg shadow-xl hover:bg-stone-600 transition duration-300 focus:outline-none focus:ring-4 focus:ring-stone-400 focus:ring-offset-2">
                            Mostrar Todos
                        </button>
                    </div>
                </div>
            </div>

            <!-- Contenido Principal: CatÃ¡logo y Carrito -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                
                <!-- Columna Izquierda: CatÃ¡logo de Productos -->
                <div id="catalog-container-desktop" class="bg-white p-6 rounded-xl shadow-lg">
                    <h2 class="text-xl font-semibold mb-4 text-amber-800 border-b pb-2 border-stone-200">CatÃ¡logo de Productos Disponibles</h2>
                    <div id="product-list" class="overflow-y-auto h-[65vh] md:h-[70vh] pr-4 space-y-3">
                        <p class="text-stone-500">Cargando productos...</p>
                    </div>
                </div>
                
                <!-- Columna Derecha: Carrito de CotizaciÃ³n -->
                <div id="cart-container-desktop" class="flex flex-col bg-white p-6 rounded-xl shadow-lg">
                    <!-- Ãrea de ImpresiÃ³n Oculta (diseÃ±o formal) -->
                    <div id="quotation-print-area" class="w-full p-4 hidden">
                        <!-- Contenido dinÃ¡mico generado por renderPrintView -->
                    </div>
                    <!-- Fin Ãrea de ImpresiÃ³n -->

                    <h2 class="text-xl font-semibold mb-4 text-amber-800 border-b pb-2 border-stone-200 hidden-print">CotizaciÃ³n Actual</h2>
                    
                    <!-- Campo Nombre de Cliente -->
                    <div class="mb-4 hidden-print">
                        <label for="client-name" class="block text-sm font-semibold text-stone-700 mb-1">Nombre del Cliente:</label>
                        <input type="text" id="client-name" placeholder="Ej: Susana GimÃ©nez" class="w-full rounded-lg border-stone-300 shadow-md focus:border-amber-600 focus:ring-amber-600 p-2">
                    </div>

                    <div id="cart-list" class="overflow-y-auto flex-grow pr-4 space-y-2">
                        <p id="empty-cart-message" class="text-stone-500 text-center mt-8">El carrito estÃ¡ vacÃ­o. Agrega productos del catÃ¡logo.</p>
                    </div>

                    <!-- Controles de Descuento y WhatsApp/PDF -->
                    <div class="mt-4 pt-4 border-t-2 border-amber-500/50 hidden-print">
                        
                        <!-- Control de Descuento -->
                        <div class="flex justify-between items-center mb-3">
                            <label for="discount-selector" class="text-sm font-bold text-stone-700">Aplicar Descuento:</label>
                            <select id="discount-selector" class="rounded-lg border-stone-300 focus:border-amber-600 focus:ring-amber-600 p-1 text-sm">
                                <option value="0">0%</option>
                                <option value="0.05">5%</option>
                                <option value="0.10">10%</option>
                                <option value="0.15">15%</option>
                                <option value="0.20">20%</option>
                            </select>
                        </div>
                        
                        <!-- Totales -->
                        <div id="total-neto-info" class="text-right text-sm text-stone-500 mb-2"></div>
                        
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-2xl font-bold text-stone-700">TOTAL GENERAL:</span>
                            <span id="cart-total" class="text-4xl font-extrabold text-amber-800">$0</span>
                        </div>

                        <!-- Botones de AcciÃ³n -->
                        <div class="space-y-3 action-buttons">
                            
                            <!-- Campo WhatsApp -->
                            <div id="whatsapp-number-group">
                                <input type="tel" id="whatsapp-number" placeholder="Ej: 549341xxxxxxx (Tu WhatsApp)" class="w-full rounded-lg border-stone-300 shadow-md p-2 text-sm">
                            </div>

                            <button id="send-whatsapp-button" class="w-full bg-blue-500 text-white font-bold py-3 rounded-lg shadow-xl hover:bg-blue-600 transition duration-300 focus:outline-none focus:ring-4 focus:ring-blue-400 focus:ring-offset-2">
                                <span class="text-xl">ğŸ’¬</span> Enviar por WhatsApp (Texto)
                            </button>

                            <button id="print-button" class="w-full bg-green-500 text-white font-bold py-3 rounded-lg shadow-xl hover:bg-green-600 transition duration-300 focus:outline-none focus:ring-4 focus:ring-green-400 focus:ring-offset-2">
                                <span class="text-xl">ğŸ–¨ï¸</span> Imprimir / Guardar como PDF
                            </button>
                            
                            <button id="clear-cart-button" class="w-full bg-red-500 text-white font-bold py-3 rounded-lg shadow-xl hover:bg-red-600 transition duration-300 focus:outline-none focus:ring-4 focus:ring-red-400 focus:ring-offset-2">
                                Vaciar Carrito
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Barra de NavegaciÃ³n MÃ³vil (Fija Abajo) -->
    <div class="nav-tabs md:hidden">
        <div class="flex justify-around p-3">
            <button id="tab-catalog" onclick="showView('catalog')" class="tab-button flex flex-col items-center px-4 py-1 active">
                <span class="text-2xl">ğŸ›ï¸</span>
                <span class="text-xs mt-0.5 font-medium">CatÃ¡logo</span>
            </button>
            <button id="tab-cart" onclick="showView('cart')" class="tab-button flex flex-col items-center px-4 py-1">
                <span class="text-2xl relative">
                    ğŸ›’
                    <span id="cart-badge" class="absolute -top-1 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold">0</span>
                </span>
                <span class="text-xs mt-0.5 font-medium">CotizaciÃ³n</span>
            </button>
        </div>
    </div>

    <script>
        // Datos brutos del catÃ¡logo
        const rawData = [
            {"Product Name":"ALZAPAÃ‘OS","Price":"NaN"},
            {"Product Name":"AlzapaÃ±o Rosario","Price":"4500.0"},
            {"Product Name":"AlzapaÃ±o Tarragona","Price":"4500.0"},
            {"Product Name":"COLGANTES Y ATRAPASOLES","Price":"NaN"},
            {"Product Name":"Colgante Grecia","Price":"4600.0"},
            {"Product Name":"Colgante Vibras","Price":"3400.0"},
            {"Product Name":"Colgante Creta","Price":"3300.0"},
            {"Product Name":"Colgante CorazÃ³n tela chico","Price":"4600.0"},
            {"Product Name":"Colgante SueÃ±os Estrella","Price":"5100.0"},
            {"Product Name":"Colgante SueÃ±os Luna","Price":"5100.0"},
            {"Product Name":"Colgante SueÃ±os CorazÃ³n","Price":"5100.0"},
            {"Product Name":"TEXTILES PARA LA MESA","Price":"NaN"},
            {"Product Name":"Camino De Arpillera","Price":"11300.0"},
            {"Product Name":"Camino De Mesa Albania","Price":"9000.0"},
            {"Product Name":"Camino De Mesa Betina Canela","Price":"12800.0"},
            {"Product Name":"Camino De Mesa Betina Rosado","Price":"12800.0"},
            {"Product Name":"Camino De Mesa Betina VisÃ³n","Price":"12800.0"},
            {"Product Name":"Camino De Mesa Betina Verde seco","Price":"12800.0"},
            {"Product Name":"Camino De Mesa Betina Blanco tiza","Price":"12800.0"},
            {"Product Name":"Camino De Mesa Gasa Natural","Price":"11900.0"},
            {"Product Name":"Camino De Mesa Gasa Ocre","Price":"11900.0"},
            {"Product Name":"Camino De Mesa Gasa Gris elefante","Price":"11900.0"},
            {"Product Name":"Set Servilletas Tussor X4 Beige","Price":"8900.0"},
            {"Product Name":"Set Servilletas Tussor X4 VisÃ³n","Price":"8900.0"},
            {"Product Name":"Set Servilletas Tussor X4 Blanco","Price":"8900.0"},
            {"Product Name":"Set Servilletas Tussor X4 Gris oscuro","Price":"8900.0"},
            {"Product Name":"CONTENEDORES, YERBERAS Y COMPLEMENTOS","Price":"NaN"},
            {"Product Name":"Contenedor Rayas Beige","Price":"6200.0"},
            {"Product Name":"Contenedor Rayas Gris","Price":"6200.0"},
            {"Product Name":"Funda Para Burlete Natural","Price":"3900.0"},
            {"Product Name":"Funda Para Burlete Jean","Price":"3900.0"},
            {"Product Name":"Manta Alfombra Grande (1.8x2 mt). Natural con rayas grises","Price":"34600.0"},
            {"Product Name":"Manta Alfombra Grande (1.8x2 mt). Natural con rayas negras","Price":"34600.0"},
            {"Product Name":"Manta Alfombra Grande (1.8x2 mt). Natural con rayas beige","Price":"34600.0"},
            {"Product Name":"Manta Alfombra Grande (1.8x2 mt). Gris con rayas naturales","Price":"34600.0"},
            {"Product Name":"Manta Alfombra Grande (1.8x2 mt). Natural lisa","Price":"34600.0"},
            {"Product Name":"Set De Limpieza Facial Beige","Price":"6500.0"},
            {"Product Name":"Set De Limpieza Facial Gris","Price":"6500.0"},
            {"Product Name":"BANDEJAS","Price":"NaN"},
            {"Product Name":"Bandeja Indonesia (25 cm diÃ¡metro) Pino","Price":"7900.0"},
            {"Product Name":"Bandeja Nepal (15X25 cm) pino","Price":"5800.0"},
            {"Product Name":"Bandeja Nepal (10X30 cm) pino","Price":"5100.0"},
            {"Product Name":"Bandeja Minka Chica (18x10 cm) Yeso cerÃ¡mico","Price":"4100.0"},
            {"Product Name":"Bandeja Minka Grande (23x11.5 cm) Yeso cerÃ¡mico","Price":"5100.0"},
            {"Product Name":"Bandeja Baru (10x10 cm) Yeso cerÃ¡mico","Price":"2700.0"},
            {"Product Name":"Bandeja JericÃ³ (18 cm diÃ¡metro) Yeso cerÃ¡mico","Price":"5100.0"},
            {"Product Name":"Bandeja Patricia (25 cm diÃ¡metro) Melamina enchapada","Price":"5600.0"},
            {"Product Name":"Bandeja Giuliana (30x12 cm) Melamina enchapada","Price":"3800.0"},
            {"Product Name":"Bandeja Teresa (30x12 cm) Melamina enchapada","Price":"3800.0"},
            {"Product Name":"Bandeja InÃ©s (20x10 cm) Melamina enchapada","Price":"3100.0"},
            {"Product Name":"DECO MADERA","Price":"NaN"},
            {"Product Name":"Palabra Corporea Chica Amor","Price":"4300.0"},
            {"Product Name":"Palabra Corporea Chica Relax","Price":"4300.0"},
            {"Product Name":"Palabra Corporea Chica Love","Price":"4300.0"},
            {"Product Name":"Palabra Corporea Chica Smiles","Price":"4300.0"},
            {"Product Name":"Palabra Corporea Chica Calma","Price":"4300.0"},
            {"Product Name":"Palabra Corporea Mediana SonrÃ­e (25x8 cm)","Price":"4300.0"},
            {"Product Name":"Palabra Corporea Mediana Hola! (20x8 cm)","Price":"4300.0"},
            {"Product Name":"Palabra Corporea Mediana Home (20x8 cm)","Price":"4300.0"},
            {"Product Name":"Palabra Corporea Grande Familia (27x7 cm)","Price":"5900.0"},
            {"Product Name":"Palabra Corporea Vertical Love (15x15 cm)","Price":"5500.0"},
            {"Product Name":"Palabra Corporea Vertical Home (15x15 cm)","Price":"5500.0"},
            {"Product Name":"Posa Vela Berlin (7 cm. Set x2 unidades, incluye velas)","Price":"5000.0"},
            {"Product Name":"Posa Vela Monstera (10x10 cm) incluye vela","Price":"2600.0"},
            {"Product Name":"PORTASAHUMERIOS Y SAHUMADORES","Price":"NaN"},
            {"Product Name":"Portasahumerio Camila Corazon 7 cm","Price":"2300.0"},
            {"Product Name":"Portasahumerio Camila Estrella 7 cm","Price":"2300.0"},
            {"Product Name":"Portasahumerio Camila Redondo 7 cm","Price":"2300.0"},
            {"Product Name":"Portasahumerio Karen 19 cm","Price":"3900.0"},
            {"Product Name":"Portasahumerio Arco Iris 18 cm","Price":"4100.0"},
            {"Product Name":"Portasahumerio Hamsa 15x11cm","Price":"5500.0"},
            {"Product Name":"Portasahumerio Sky","Price":"1200.0"},
            {"Product Name":"VELAS, BOMBONES DE SOJA Y APAGAVELAS","Price":"NaN"},
            {"Product Name":"Vela Francisca limon","Price":"5300.0"},
            {"Product Name":"Vela Francisca lavanda","Price":"5300.0"},
            {"Product Name":"Vela Francisca vainilla","Price":"5300.0"},
            {"Product Name":"Vela Francisca floral","Price":"5300.0"},
            {"Product Name":"Vela Olivia limon","Price":"4400.0"},
            {"Product Name":"Vela Olivia lavanda","Price":"4400.0"},
            {"Product Name":"Vela Olivia vainilla","Price":"4400.0"},
            {"Product Name":"Vela Olivia floral","Price":"4400.0"},
            {"Product Name":"Vela Niza 9 cm diÃ¡metro limon","Price":"4200.0"},
            {"Product Name":"Vela Niza 9 cm diÃ¡metro lavanda","Price":"4200.0"},
            {"Product Name":"Vela Niza 9 cm diÃ¡metro vainilla","Price":"4200.0"},
            {"Product Name":"Vela Niza 9 cm diÃ¡metro floral","Price":"4200.0"},
            {"Product Name":"Vela Venecia 15cm x 9cm limon","Price":"9700.0"},
            {"Product Name":"Vela Venecia 15cm x 9cm lavanda","Price":"9700.0"},
            {"Product Name":"Vela Venecia 15cm x 9cm vainilla","Price":"9700.0"},
            {"Product Name":"Vela Venecia 15cm x 9cm floral","Price":"9700.0"},
            {"Product Name":"Vela Marsella 8cm x4cm limon","Price":"5900.0"},
            {"Product Name":"Vela Marsella 8cm x4cm lavanda","Price":"5900.0"},
            {"Product Name":"Vela Marsella 8cm x4cm vainilla","Price":"5900.0"},
            {"Product Name":"Vela Marsella 8cm x4cm floral","Price":"5900.0"},
            {"Product Name":"Vela Genova circular 4.5 cm x5.5 cm","Price":"4400.0"},
            {"Product Name":"Vela Genova cuadrada 5 cm x 5 cm","Price":"4400.0"},
            {"Product Name":"Apagavela Frases","Price":"2600.0"},
            {"Product Name":"Apagavela Filomena","Price":"2600.0"},
            {"Product Name":"Apagavela Bruma","Price":"2600.0"},
            {"Product Name":"ENVASES DIFUSOR Y HORNITOS","Price":"NaN"},
            {"Product Name":"Envase Suecia","Price":"6300.0"},
            {"Product Name":"Envase Soleil","Price":"6000.0"},
            {"Product Name":"Envase Esperanza","Price":"4800.0"},
            {"Product Name":"CESTERÃA","Price":"NaN"},
            {"Product Name":"Panera De Junco NÂ°1","Price":"13900.0"},
            {"Product Name":"Panera De Junco NÂ°2","Price":"16300.0"},
            {"Product Name":"FLORES SECAS Y DE TELA","Price":"NaN"},
            {"Product Name":"Flor De Tela Chica","Price":"1200.0"},
            {"Product Name":"Flor De Tela Grande","Price":"2400.0"},
            {"Product Name":"OBJETOS DECO","Price":"NaN"},
            {"Product Name":"Pesas De Mantel Beta","Price":"6300.0"},
            {"Product Name":"Pesa De Mantel Vera","Price":"6300.0"},
            {"Product Name":"Set Servilletero Mingo","Price":"6500.0"},
            {"Product Name":"Perfumero CorazÃ³n CerÃ¡mica","Price":"6300.0"},
            {"Product Name":"DIFUSORES, AROMATIZADORES Y ESENCIAS","Price":"NaN"},
            {"Product Name":"Difusor Iluminarte 125 Ml","Price":"5700.0"},
            {"Product Name":"Difusor Aromanza 200 Ml","Price":"11900.0"},
            {"Product Name":"Aromatizador Textil Charming 250 Ml","Price":"7700.0"},
            {"Product Name":"Esencia Massala","Price":"1400.0"},
            {"Product Name":"Difusor Auto Iluminarte","Price":"4800.0"},
            {"Product Name":"SAHUMERIOS AROMANZA","Price":"NaN"},
            {"Product Name":"Tibetano Slim","Price":"1900.0"},
            {"Product Name":"Tibetanos Premium","Price":"4700.0"},
            {"Product Name":"Momentos","Price":"2400.0"},
            {"Product Name":"SAHUMERIOS SAGRADA MADRE","Price":"NaN"},
            {"Product Name":"Hierbas","Price":"2500.0"},
            {"Product Name":"Perlas AromÃ¡ticas","Price":"3200.0"},
            {"Product Name":"Bombitas X4","Price":"800.0"},
            {"Product Name":"Kit Humito Sagrado","Price":"2400.0"},
            {"Product Name":"Bomba 7 Chakras","Price":"1800.0"},
            {"Product Name":"Pastilla 7 Dias De Limpieza","Price":"2600.0"},
            {"Product Name":"ESPECIAL NAVIDAD","Price":"NaN"},
            {"Product Name":"Pino Lourdes","Price":"9000.0"},
            {"Product Name":"Pino Isabel","Price":"9000.0"},
            {"Product Name":"Pino Carmen","Price":"9200.0"},
            {"Product Name":"Pino Paz","Price":"9200.0"},
            {"Product Name":"Pino MarÃ­a","Price":"9000.0"},
            {"Product Name":"Pino Yeso chico","Price":"3400.0"},
            {"Product Name":"Pino Yeso grande","Price":"4500.0"},
            {"Product Name":"Colgante De CerÃ¡mica Calado Gaspar","Price":"3900.0"},
            {"Product Name":"Colgante De CerÃ¡mica Melchor","Price":"3900.0"},
            {"Product Name":"Colgante De CrÃ¡mica Vilta Set X3","Price":"7700.0"},
            {"Product Name":"Colgante De CerÃ¡mica Shine","Price":"3900.0"},
            {"Product Name":"Puertero De CerÃ¡mica Feliz Navidad","Price":"4600.0"},
            {"Product Name":"Atrapasol Ãngel","Price":"5000.0"},
            {"Product Name":"Set Adorno Tela","Price":"7700.0"},
            {"Product Name":"Set Adornos Mdf", "Price":"5500.0"},
            {"Product Name":"Estrella Posa Vela","Price":"2600.0"},
            {"Product Name":"Posa Vela Magia","Price":"2600.0"},
            {"Product Name":"Bandeja Noche De Paz","Price":"3900.0"},
            {"Product Name":"Bandeja Felices Fiestas","Price":"3900.0"},
            {"Product Name":"Pino Alaska","Price":"7700.0"},
            {"Product Name":"Posa vela Navidad","Price":"2600.0"},
            {"Product Name":"Servilletero Star","Price":"6500.0"},
            {"Product Name":"Puertero Gabriel","Price":"3300.0"},
            {"Product Name":"Corona Paris","Price":"7900.0"},
            {"Product Name":"Posa vela Arbol Yeso","Price":"4200.0"},
            {"Product Name":"SAHUMERIOS, CONOS Y OTROS","Price":"NaN"},
            {"Product Name":"Sahumerio Crystal Scents","Price":"3100.0"},
            {"Product Name":"Sahumerios 7 Arcangeles Iluminarte","Price":"1800.0"},
            {"Product Name":"Sahumerios Laksmi doble empaste","Price":"10800.0"}
        ];

        let productData = [];
        let categories = new Set();
        let cart = {}; // { id: {nombre, precio, cantidad} }
        let uniqueIdCounter = 0;

        // FunciÃ³n para poblar las opciones de filtro de categorÃ­a (GLOBAL)
        function populateCategoryFilter() {
            const categoryFilter = document.getElementById('category-filter');
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                categoryFilter.appendChild(option);
            });
        }
        
        // FunciÃ³n para parsear datos y generar IDs Ãºnicos
        function parseData() {
            let currentCategory = "Desconocido";
            rawData.forEach(item => {
                // SOLUCIÃ“N ROBUSTA: Asegurar que el precio sea un nÃºmero vÃ¡lido y entero
                const cleanedPriceString = item.Price ? item.Price.replace(/[^\d.]/g, '') : '0';
                const price = parseInt(cleanedPriceString); 
                const name = item["Product Name"].trim();
                
                if (isNaN(price) || price === 0) { 
                    currentCategory = name;
                    categories.add(name);
                } else {
                    productData.push({
                        id: uniqueIdCounter++, 
                        categoria: currentCategory,
                        nombre: name,
                        precio: price 
                    });
                }
            });
        }

        // FunciÃ³n para formatear moneda
        function formatCurrency(value) {
            return new Intl.NumberFormat('es-AR', {
                style: 'currency',
                currency: 'ARS',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(value);
        }

        // FunciÃ³n principal para renderizar el carrito y CALCULAR EL TOTAL
        function renderCart() {
            const cartList = document.getElementById('cart-list');
            const cartTotalEl = document.getElementById('cart-total');
            const discountSelector = document.getElementById('discount-selector');
            const cartItemCountEl = document.getElementById('cart-badge');
            const emptyMessage = document.getElementById('empty-cart-message');
            
            cartList.innerHTML = ''; 
            let subtotalWithoutDiscount = 0;
            let cartItemsCount = 0;
            const discountRate = parseFloat(discountSelector ? discountSelector.value : 0); // Defensivo
            
            // Elementos de texto dependientes (Defensivo)
            const totalNetoInfoEl = document.getElementById('total-neto-info');

            for (const id in cart) {
                const item = cart[id];
                const numericPrice = Number(item.precio); 
                const subtotal = numericPrice * item.cantidad;
                subtotalWithoutDiscount += subtotal; 
                cartItemsCount += item.cantidad;

                // Generar HTML para el carrito en la aplicaciÃ³n
                const itemDiv = document.createElement('div');
                itemDiv.className = "bg-white p-3 rounded-lg border border-stone-200 flex justify-between items-center item-card";
                itemDiv.innerHTML = `
                    <div class="flex flex-col flex-grow cart-item-details">
                        <p class="font-bold text-stone-700">${item.nombre}</p>
                        <p class="text-sm text-amber-700">${formatCurrency(item.precio)} x ${item.cantidad}</p>
                    </div>
                    <div class="flex items-center space-x-3 cart-item-controls">
                        <span class="font-extrabold text-lg text-amber-800">${formatCurrency(subtotal)}</span>
                        <button onclick="changeQuantity(${id}, -1)" class="p-1 bg-stone-300 text-stone-800 rounded-full w-6 h-6 flex items-center justify-center text-xl font-bold leading-none hover:bg-stone-400 focus:outline-none focus:ring-2 focus:ring-stone-500">
                            -
                        </button>
                        <button onclick="changeQuantity(${id}, 1)" class="p-1 amber-gradient text-white rounded-full w-6 h-6 flex items-center justify-center text-xl font-bold leading-none hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-amber-500">
                            +
                        </button>
                    </div>
                `;
                cartList.appendChild(itemDiv);
            }

            // Aplicar Descuento
            const discountAmount = subtotalWithoutDiscount * discountRate;
            const totalFinal = subtotalWithoutDiscount - discountAmount;
            
            // Actualizar mensaje de carrito vacÃ­o
            if (emptyMessage) emptyMessage.style.display = subtotalWithoutDiscount === 0 ? 'block' : 'none';
            
            // Actualizar contador de Ã­tems para mÃ³vil
            if (cartItemCountEl) {
                cartItemCountEl.textContent = cartItemsCount > 0 ? cartItemsCount : '';
                cartItemCountEl.style.opacity = cartItemsCount > 0 ? 1 : 0;
            }

            // Actualizar Total General
            if (cartTotalEl) cartTotalEl.textContent = formatCurrency(totalFinal);

            // Mostrar el descuento aplicado (si es necesario)
            if (discountRate > 0) {
                 const discountDisplay = document.createElement('p');
                 discountDisplay.className = "text-sm text-red-500 font-semibold mt-1";
                 discountDisplay.textContent = `Descuento Aplicado (${(discountRate * 100).toFixed(0)}%): -${formatCurrency(discountAmount)}`;
                 cartList.appendChild(discountDisplay);
            }
            
            // Actualizar Totales Netos (Defensivo)
            if (totalNetoInfoEl) {
                totalNetoInfoEl.innerHTML = `
                    Subtotal Neto: ${formatCurrency(subtotalWithoutDiscount)} 
                    ${discountRate > 0 ? `(Descuento ${discountRate * 100}%: ${formatCurrency(discountAmount)})` : ''}
                `;
            }

            // Llamar a la funciÃ³n de renderizado de impresiÃ³n/PDF (Defensivo)
            renderPrintView(subtotalWithoutDiscount, totalFinal, discountRate);
        }
        
        // LÃ³gica para cambiar cantidad
        window.changeQuantity = function(id, delta) {
            id = parseInt(id);
            if (cart[id]) {
                cart[id].cantidad += delta;
                if (cart[id].cantidad <= 0) {
                    delete cart[id];
                }
            }
            updateDashboard();
        };

        // LÃ³gica para agregar al carrito
        window.addToCart = function(id) {
            id = parseInt(id);
            if (cart[id]) {
                cart[id].cantidad += 1;
            } else {
                const product = productData.find(p => p.id === id);
                if (product) {
                    cart[id] = { ...product, cantidad: 1 };
                }
            }
            updateDashboard();
        };
        
        // LÃ³gica para enviar por WhatsApp (TEXTO)
        window.sendQuoteViaWhatsApp = function() {
            const clientName = document.getElementById('client-name') ? document.getElementById('client-name').value : '';
            const whatsappNumber = document.getElementById('whatsapp-number') ? document.getElementById('whatsapp-number').value.replace(/[^\d]/g, '') : '';
            const total = document.getElementById('cart-total') ? document.getElementById('cart-total').textContent : '$0';
            
            if (!whatsappNumber || Object.keys(cart).length === 0) {
                 alert('Por favor, ingresa tu nÃºmero de WhatsApp y aÃ±ade productos al carrito.');
                 return;
            }

            let message = `Â¡Hola! AquÃ­ tienes la cotizaciÃ³n de Blanco & Madera para ${clientName || 'ti'}:`;
            message += "%0A%0A*Detalle de Pedido:*";

            for (const id in cart) {
                const item = cart[id];
                message += `%0Aâ€” ${item.nombre} x ${item.cantidad} (${formatCurrency(item.precio)} c/u)`;
            }

            message += `%0A%0A*TOTAL FINAL: ${total}*`;
            message += "%0A%0AGracias por tu compra. Â¡Esperamos tu confirmaciÃ³n!";

            const url = `https://wa.me/${whatsappNumber}?text=${message}`;
            window.open(url, '_blank');
        };

        // LÃ³gica para imprimir/PDF
        window.printQuote = function() {
            window.print();
        };

        // Nuevo: FunciÃ³n que construye el layout de impresiÃ³n
Â  Â  Â  Â  function renderPrintView(subtotalWithoutDiscount, totalWithDiscount, discountRate) {
            // Recoger elementos de forma defensiva
            const printView = document.getElementById('print-view');
            const clientName = document.getElementById('client-name') ? document.getElementById('client-name').value.trim() : "Cliente";
Â  Â  Â  Â  Â  Â  const clientNameHtml = clientName ? `<p class="print-name-field">Cliente: ${clientName}</p>` : '';
Â  Â  Â  Â  Â  Â Â 
            if (!printView) return; // Salir si el contenedor de impresiÃ³n no existe

Â  Â  Â  Â  Â  Â  let printContent = '';

Â  Â  Â  Â  Â  Â  // 1. Header de ImpresiÃ³n
Â  Â  Â  Â  Â  Â  printContent += `
Â  Â  Â  Â  Â  Â  Â  Â  <div style="margin-bottom: 25px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="print-logo-text">blanco&madera</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <hr style="width: 100%; border: 1px solid #ddd; margin: 5px 0;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="print-deco-home">DECO HOME</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="print-title">NOTA DE PEDIDO</h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${clientNameHtml}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <h2 style="font-size: 14pt; margin-bottom: 10px; color: #555;">Detalle de Productos:</h2>
Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  // 2. Lista de Productos
Â  Â  Â  Â  Â  Â  for (const id in cart) {
Â  Â  Â  Â  Â  Â  Â  Â  const item = cart[id];
Â  Â  Â  Â  Â  Â  Â  Â  const itemSubtotal = item.precio * item.cantidad;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  printContent += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="cart-item-print flex justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-weight: 500;">${item.nombre}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>${item.cantidad} x ${formatCurrency(item.precio)} = ${formatCurrency(itemSubtotal)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // 3. Resumen de Totales
Â  Â  Â  Â  Â  Â  if (discountRate > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  const discountAmount = subtotalWithoutDiscount * discountRate;
Â  Â  Â  Â  Â  Â  Â  Â  printContent += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="discount-print-summary" style="text-align: right; margin-top: 15px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: 10pt; color: #777;">Subtotal: ${formatCurrency(subtotalWithoutDiscount)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: 10pt; color: #c00;">Descuento (${(discountRate * 100).toFixed(0)}%): -${formatCurrency(discountAmount)}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  printContent += `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="cart-total-print flex justify-between" style="text-align: right;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-weight: 700; color: #333;">TOTAL FINAL:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-weight: 800; color: #d4a753;">${formatCurrency(totalWithDiscount)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  printView.innerHTML = printContent;
Â  Â  Â  Â  }


Â  Â  Â  Â  // FunciÃ³n que renderiza la lista de productos (CatÃ¡logo)
Â  Â  Â  Â  function renderProductList(data) {
Â  Â  Â  Â  Â  Â  const productList = document.getElementById('product-list');
Â  Â  Â  Â  Â  Â  productList.innerHTML = ''; 

Â  Â  1. **Copia todo el texto** del bloque de cÃ³digo.
    2. **Edita tu Archivo en GitHub:** Borra el cÃ³digo que tienes actualmente y **PEGA este nuevo cÃ³digo completo.**
    3. **Confirma y Prueba tu enlace.**
    
Este archivo resuelve el `SyntaxError` y te devuelve al Mini-Cotizador funcional. Si tienes la posibilidad de probar la vista previa o el enlace pÃºblico, por favor, hazlo y confÃ­rmame que la suma y el logo ya estÃ¡n funcionando.
